# Memory Optimization Configuration for Open WebUI
# This configuration helps reduce memory usage by disabling heavy features

# Core memory optimizations
DISABLE_BACKGROUND_SERVICES=true
LAZY_LOAD_MODELS=true
ENABLE_BASE_MODELS_CACHE=false
DISABLE_VECTOR_DB=true

# Disable heavy features that consume significant memory
BYPASS_EMBEDDING_AND_RETRIEVAL=true
BYPASS_WEB_SEARCH_EMBEDDING_AND_RETRIEVAL=true

# Use lightweight database options
DATABASE_URL=sqlite:///data/webui.db

# Disable optional heavy components
ENABLE_IMAGE_GENERATION=false
ENABLE_CODE_EXECUTION=false
ENABLE_WEB_SEARCH=false

# Use minimal model configurations
RAG_EMBEDDING_ENGINE=
RAG_RERANKING_ENGINE=

# Disable audio processing if not needed
USER_PERMISSIONS_CHAT_STT=false
USER_PERMISSIONS_CHAT_TTS=false

# Use minimal middleware
ENABLE_COMPRESSION_MIDDLEWARE=false

# Disable non-essential features
ENABLE_NOTES=false
ENABLE_CHANNELS=false
ENABLE_COMMUNITY_SHARING=false
ENABLE_MESSAGE_RATING=false

# Vector database disabled for memory optimization (set by DISABLE_VECTOR_DB=true above)
# VECTOR_DB=disabled

# Redis configuration (use simple setup)
REDIS_URL=redis://localhost:6379/0

# Disable telemetry and monitoring
ENABLE_OTEL=false
ENABLE_VERSION_UPDATE_CHECK=false

# Set conservative limits
CHUNK_SIZE=500
CHUNK_OVERLAP=50
RAG_TOP_K=3
RAG_FILE_MAX_SIZE=2097152
RAG_FILE_MAX_COUNT=5